--CREATE DATABASE 'pruebas-digitalware'
--USE DATABASE 'pruebas-digitalware'

CREATE TABLE PRODUCT (
	ID INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	CODE VARCHAR(50) NOT NULL,
	NAME VARCHAR(200) NOT NULL,
	DESCRIPTION VARCHAR(500) NOT NULL,
	UNITS INT NOT NULL,
	PRICE NUMERIC(10,2) NOT NULL
);

CREATE TABLE CUSTOMER (
	ID INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	IDENTIFICAION VARCHAR(15) NOT NULL,
	FULLNAME VARCHAR(200) NOT NULL,
	BIRTH DATE NOT NULL	
);

CREATE TABLE BILL (
	ID INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	DESCRIPTION VARCHAR(200) NULL,
	SOLD DATE NOT NULL,
	CUSTOMER_ID INT NOT NULL REFERENCES CUSTOMER(ID),
	TOTAL_PRICE NUMERIC(10,2) NOT NULL
);

CREATE TABLE BILL_DETAIL (
	ID INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	BILL_ID INT NOT NULL REFERENCES BILL(ID),
	PRODUCT_ID INT NOT NULL REFERENCES PRODUCT(ID),
	COUNT INT NOT NULL,
	PRICE NUMERIC(10,2) NOT NULL
);